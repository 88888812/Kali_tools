# Kali_tools

<h2>Практические навыки работы с Kali Linux</h2>
На основе операционной системы Kali Linux были разобраны основные
инструменты для проведения тестирований на проникновение. Попробуем найти
какие-либо данные с помощью его инструментов. Kali имеет широкий спектр
программ для сканирования хостов на наличие открытых портов и анализ
уязвимостей веб-серверов.


<h3> Nmap— утилита, предназначенная для сканирования IP-сетей,
определения состояния объектов сканируемой сети (портов и соответствующих
им служб). </h3>

Первым делом просканируем специальный хост на наличие открытых
портов. <br>
![1](picture/1.png)
<br>
Рисунок Сканирование хоста scanme.nmap.org <br>

Анализируем полученные данные:

1. Разберемся с состояниями (STATE) <br>
   Nmap распознаёт следующие состояния портов: open, filtered, closed,
   или unfiltered. Open - готово для принятия пакетов на этот порт. Filtered -
   брандмауэр, фильтр, или что-то другое в сети блокирует порт, так что Nmap не
   может определить, является ли порт открытым или закрытым. Closed — не
   связанны в данный момент ни с каким приложением, но могут быть открыты в
   любой момент. Unfiltered порты отвечают на запросы Nmap, но нельзя
   определить, являются ли они открытыми или закрытыми.

3. Service и port
   Стандартные сервисы находятся на своих стандартных портах: <br>
   FTP — протокол передачи файлов по сети. <br>
   SSH — сетевой протокол прикладного уровня, позволяющий производить
   удалённое управление операционной системой и туннелирование TCP-
   соединений.<br>
   HTTP - протокол прикладного уровня передачи данных.<br>
   И пару нестандартных соединений:<br>
   Nping — это инструмент с открытым исходным кодом для генерации сетевых
   пакетов, анализа ответов и измерения времени отклика.<br>
   1331337 - Этот номер порта означает «элитный» в написании взломщика (3=E, 1=L,
   7=T) и из-за особого значения часто используется для целей злоумышленников.
   На этом порту работает много бэкдоров/троянов, вот некоторые другие, которые
   работают на том же порту: Back Orifice, Elite.<br>
   Таким образом, мы нашли бэкдор.<br>

<h3>Nikto – это инструмент оценки веб-серверов.</h3>
Он предназначен для поиска различных небезопасных файлов, конфигураций и программ на веб-серверах
любого типа. Результат работы сканера показан на рисунке.<br>

![2](picture/2.png)
<br>
Рисунок – Вывод команды от сканера Nikto. <br>

Этой командой мы сразу получаем особенности структуры сайта,
благодаря информации о заголовках и сервере. Стоит отметить, что Nikto имеет
широкий функционал и способен частично или полностью заменять другие
инструменты. Так, например, он также выдает информацию о протоколах
шифрования SSL, таким образом мы можем не прибегать без необходимости к
Wireshark9-у.

<h3>Sublister — это инструмент, разработанный на Python для поиска
поддоменов веб-сайта с использованием OSINT</h3>
Для начала разберемся с основными понятиями. Название сайта
соотнесенное по DNS с IP-адресом н азывается доменом. Поддомен же нужен
для продвижения сайтов и развлетвления тяжелой структуры сайта. В пентесте
необходим поиск поддоменов для тестирования на безопасность, ведь поддомен
может оказаться слабо защищенным.
Попробуем найти поддомены google.com. Для этого воспользуемся
программой для поисков поддоменов Sublist3r (см. рисунок). <br>

![3](picture/3.png)
<br>
Рисунок –Найденные поддомены сайта google.com.


<h3>Metasploit - Фреймворк для тестирования на проникновение.</h3>
Для тестирования фреймворка установим bee-box(виртуальная машина с
предустановленным bWAPP-ом). На рисунке видно поле настроек bWAPP.
<br>

![4](picture/4.png)
<br>
Рисунок –Настройки bWAPP <br>

Далее определим IP нашей машины и зайдем на него. Мы достигли этого
благодаря типу подключения – сетевой мост. IP машины и процесс подключения
к ней можно увидеть на рисунках ниже.
<br>

![5](picture/5.png)
<br>
Рисунок –IP машины
<br>

![6](picture/6.png)
<br>
Рисунок –Подключение к bee-box по IP <br>

Настройки виртуальной машины приведены на рисунке ниже.
<br>

![7](picture/7.png)
<br>
Рисунок –Настройки VirtualBox для машины bee-box <br>

Запустим сканирование через Nmap и сохраним в файл на рабочем столе.
<br>

![8](picture/8.png)
<br>
Рисунок –Результат сканирования Nmap-ом bee-box-а <br>

Заметим, что Nmap выдает информацию об открытом 21 порте с сервисом
ftp с версией. Перейдем к работе с Metasploit. Для начала скачаем ее, затем.
инициализируем базу данных Metasploit PostgreSQL и запустим консоль.
<br>

![9](picture/9.png)
<br>
Рисунок –Скачивание фреймворка с гита
<br>

![10](picture/10.png)
<br>
Рисунок –Запуск консоли Metasploit и создание базы данных <br>

Теперь подключим заранее созданную базу данных к фреймворку, что
можно увидеть на рисунке снизу.
<br>

![11](picture/11.png)
<br>
Рисунок –Проверка и подключение базы данных <br>

Загрузим в базу данных наш скан от Nmap, далее посмотрим какие сервисы
и хосты лежат в базе данных Metasploit. На рисунках видно, что мы
успешно загрузили скан и проверили его содержимое.
<br>

![12](picture/12.png)
<br>Рисунок –Импортирование результатов в базу данных и просмотр
содержимого<br>

<br>

![13](picture/13.png)
<br>
Рисунок 16–Проверка и подключение базы данных <br>

Посмотрим на базу данных уязвимостей связанных с ProFTPD13. Результат
показан на рисунке ниже.
<br>

![14](picture/14.png)
<br>
Рисунок –список уязвимостей <br>

Мы видим огромное количество уязвимостей связанных с ProFTPD, но мы
не нашли нашу версию. Но понимание, что это ПО имеет большое количество
уязвимостей, включая и более новые версии, дает нам повод продолжать поиски.
Стоит отметить, что Metasploit имеет встроенный Nmap и мы могли бы не
импортировать результаты скана в базу данных, если бы пользовались
интегрированным Nmap-ом. Однако мы уже заметили, что его оказалось мало
для полноценного анализа нашей машины на уязвимости.
Перейдем к инструментам Metasploit. Metasploit обладает огромным
количеством встроенных инструментов и сканнеров, которые необходимы для
тестов на проникновение, что можно видеть на рисунке.
<br>

![15](picture/15.png)
<br>
Рисунок –список уязвимостей <br>

Мы видим огромное количество уязвимостей связанных с ProFTPD, но мы не нашли нашу версию. Но понимание, что это ПО имеет большое количество уязвимостей, включая и более новые версии, дает нам повод продолжать поиски.
Стоит отметить, что Metasploit имеет встроенный Nmap и
мы могли бы не импортировать результаты скана в базу данных,
если бы пользовались интегрированным Nmap-ом. Однако мы уже заметили,
что его оказалось мало для полноценного анализа нашей машины на уязвимости. 
Перейдем к инструментам Metasploit. 
Metasploit обладает огромным количеством встроенных инструментов 
и сканнеров, которые необходимы для тестов на проникновение, что можно 
видеть на рисунке .
<br>
![16](picture/16.png)
<br>Рисунок –Вывод вспомогательных программ и скриптов <br>

Перейдем от общих материалов к нашим для продолжения поиска 
уязвимостей открыто порта. Уязвимости ПО приведены на рисунке.
<br>
![17](picture/17.png)
<br>Рисунок –Вывод инструментов для нашего ПО <br>

Использование всех инструментов не дало результатов. 
Подойдем с другой стороны: Metasploit также имеет список
exploit-ов и через метод show targets мы можем смотреть к каким
версиям ПО они применимы. 
Результат выполнения команды show targets показан на рисунке.
<br>
![18](picture/18.png)
<br>Рисунок –Возможность применения exploit-а <br>

Перебор всех exploit-ов также не дал результатов для нашей версии.
Однако мы постоянно встречаем соседние версии программного обеспечения.
Проверим нашу гипотезу о уязвимости с помощью базы данных 
уязвимостей CVE (см. рисунок).
<br>
![19](picture/19.png)
<br>Рисунок –Уязвимость из CVE <br>

Таким образом, наше предположение оказалось правдой. 
Также стоит отметить, что по ходу прохождения 
практики часто встречались понятия CVE, CVSS, 
с которыми мы работали ранее (в пунктах 2 и 3),
из чего можно сделать вывод о востребованности и 
актуальности полученных знаний и о удовлетворенностью
полученных результатов. 
Попробуем все же найти уязвимости bee-box-а. Для этого 
воспользуемся WMAP. Он автоматизирует использование инструментов 
Metasploit. Работа сканнера и его скачивание показано на рисунках.
<br>
![20](picture/20.png)
<br>Рисунок –Скачивание сканера и добавление нашего IP в него  
<br>
![21](picture/21.png)
<br>Рисунок –Запуск скрипта  <br>

![22](picture/22.png)
<br>Рисунок –Результаты сканирование <br>

Отметим, что тут был иной подход, модули просматривали нашу машину как веб-сервис и искали наиболее распространенные относительные URL-адрес страницы. Все наши предыдущие подходы основывались на проверке портов.
Проверим нашу базу данных на внесенные изменение после запуска
WMAP (см. рисунок ).
<br>
![22](picture/23.png)
<br>Рисунок –Найденные уязвимости  <br>


